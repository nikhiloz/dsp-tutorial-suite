@startuml architecture

skinparam backgroundColor #FEFEFE
skinparam defaultFontName "Segoe UI"
skinparam defaultFontSize 13
skinparam shadowing true
skinparam roundcorner 12
skinparam packageBorderThickness 2

skinparam package {
    BackgroundColor<<app>> #E3F2FD
    BorderColor<<app>> #1565C0
    FontColor<<app>> #0D47A1
    BackgroundColor<<core>> #FFF3E0
    BorderColor<<core>> #E65100
    FontColor<<core>> #BF360C
    BackgroundColor<<tool>> #E8F5E9
    BorderColor<<tool>> #2E7D32
    FontColor<<tool>> #1B5E20
    BackgroundColor<<build>> #F3E5F5
    BorderColor<<build>> #6A1B9A
    FontColor<<build>> #4A148C
}

skinparam component {
    BackgroundColor #FFFFFF
    BorderColor #455A64
    FontColor #263238
    BorderThickness 1.5
}

title <size:20><b>DSP Tutorial Suite</b></size>\n<size:14><color:#546E7A>System Architecture Overview</color></size>\n<size:11><i>C99 | Zero External Dependencies | POSIX</i></size>

package "  Chapter Demos (30 binaries)  " <<app>> {
    [<b>Ch 01-03</b>\n<size:10>Signals, Sampling,\nComplex Numbers</size>] as PH1
    [<b>Ch 04-09</b>\n<size:10>LTI, Z-Transform, DFT,\nFFT, Windows</size>] as PH2
    [<b>Ch 10-18</b>\n<size:10>FIR, IIR, Structures,\nMultirate, Fixed-Point</size>] as PH3
    [<b>Ch 19-27</b>\n<size:10>Goertzel, Hilbert, LPC,\nMUSIC, MFCC, 2D-DSP</size>] as PH4
    [<b>Ch 28-30</b>\n<size:10>Real-Time, Optimisation,\nCapstone</size>] as PH5
}

package "  DSP Core Library (libdsp_core.a — 23 modules)  " <<core>> {
    package "Foundation" #FFECB3 {
        [<b>dsp_utils</b>\n<size:10>Complex, windows, helpers</size>] as UTILS
        [<b>signal_gen</b>\n<size:10>Impulse, cosine, chirp, noise</size>] as SIGGEN
        [<b>convolution</b>\n<size:10>Linear, circular, energy</size>] as CONV
    }

    package "Transforms & Spectral" #FFECB3 {
        [<b>fft</b>\n<size:10>Radix-2 FFT/IFFT</size>] as FFT
        [<b>advanced_fft</b>\n<size:10>Goertzel, sliding DFT</size>] as AFFT
        [<b>spectrum</b>\n<size:10>Periodogram, Welch PSD</size>] as SPEC
        [<b>spectral_est</b>\n<size:10>MUSIC, Capon</size>] as SEST
        [<b>cepstrum</b>\n<size:10>MFCC, Mel filterbank</size>] as CEPS
    }

    package "Filters" #FFECB3 {
        [<b>filter</b>\n<size:10>FIR filter, lowpass</size>] as FILT
        [<b>iir</b>\n<size:10>Biquad, SOS, Butterworth</size>] as IIR
        [<b>remez</b>\n<size:10>Parks-McClellan</size>] as REMEZ
        [<b>adaptive</b>\n<size:10>LMS, NLMS, RLS</size>] as ADAPT
        [<b>multirate</b>\n<size:10>Decimate, interpolate</size>] as MULTI
        [<b>streaming</b>\n<size:10>Overlap-Add/Save</size>] as STREAM
    }

    package "Analysis" #FFECB3 {
        [<b>correlation</b>\n<size:10>FFT-based xcorr</size>] as CORR
        [<b>hilbert</b>\n<size:10>Analytic signal, envelope</size>] as HILB
        [<b>lpc</b>\n<size:10>Levinson-Durbin, AR</size>] as LPC
        [<b>averaging</b>\n<size:10>EMA, median filter</size>] as AVG
    }

    package "Numeric & 2-D" #FFECB3 {
        [<b>fixed_point</b>\n<size:10>Q15/Q31 arithmetic</size>] as FIXPT
        [<b>dsp2d</b>\n<size:10>2D conv, Sobel, FFT2D</size>] as DSP2D
    }

    package "Real-Time & Optimisation" #FFECB3 {
        [<b>realtime</b>\n<size:10>Ring buffer, frame proc</size>] as RT
        [<b>optimization</b>\n<size:10>Radix-4 FFT, twiddle</size>] as OPT
    }
}

package "  Tools & Visualisation  " <<tool>> {
    [<b>gnuplot</b>\n<size:10>Pipe-based PNG plotting</size>] as GP
    [<b>generate_plots</b>\n<size:10>Batch plot generation</size>] as GENPLOT
    [<b>PlantUML</b>\n<size:10>Architecture diagrams</size>] as PUML
}

package "  Build System  " <<build>> {
    [<b>GNU Make</b>\n<size:10>39 targets, debug/release</size>] as MAKE
    [<b>Static Library</b>\n<size:10>libdsp_core.a (23 .o)</size>] as LIB
    [<b>8 Test Suites</b>\n<size:10>98 assertions</size>] as TEST
}

' Demo → Library
PH1 -[#1565C0,bold]-> UTILS
PH1 -[#1565C0,bold]-> SIGGEN
PH2 -[#1565C0,bold]-> FFT
PH2 -[#1565C0,bold]-> SPEC
PH3 -[#1565C0,bold]-> FILT
PH3 -[#1565C0,bold]-> IIR
PH4 -[#1565C0,bold]-> HILB
PH4 -[#1565C0,bold]-> SEST
PH5 -[#1565C0,bold]-> RT
PH5 -[#1565C0,bold]-> OPT

' Internal deps
FFT .[#E65100,dashed].> UTILS
SPEC .[#E65100,dashed].> UTILS
IIR .[#E65100,dashed].> UTILS
STREAM .[#E65100,dashed].> UTILS
RT .[#E65100,dashed].> UTILS
OPT .[#E65100,dashed].> UTILS

' Tools
GENPLOT -[#2E7D32]-> GP
PH1 -[#2E7D32,dashed]-> GP : plots

' Build
MAKE -[#6A1B9A]-> LIB
MAKE -[#6A1B9A]-> TEST

legend right
  |= Color |= Layer |= Description |
  | <#E3F2FD> | Application | 30 chapter demos |
  | <#FFF3E0> | Core Library | 23 DSP modules |
  | <#E8F5E9> | Tools | Plotting & diagrams |
  | <#F3E5F5> | Build | Make + tests |
endlegend

@enduml
